# 🚀 快速启动外网访问（推荐方案）

## 最简单的方法 - 3步搞定

### 第1步：安装工具（只需一次）

在终端运行：
```bash
brew install cloudflared
```

### 第2步：启动本地服务

确保你的 CSM 系统正在运行：
```bash
cd /Users/bonnie/CSM_Cursor
npm run dev
```

### 第3步：启动外网穿透

**打开两个新的终端窗口**（保持上面的服务运行）：

**终端窗口1 - 前端穿透：**
```bash
cloudflared tunnel --url http://localhost:3000
```
会显示类似：
```
+--------------------------------------------------------------------------------------------+
|  Your quick Tunnel has been created! Visit it at (it may take some time to be reachable): |
|  https://xxxx-xx-xx-xx-xx.trycloudflare.com                                                |
+--------------------------------------------------------------------------------------------+
```
**复制这个地址，这就是前端访问地址！**

**终端窗口2 - 后端穿透：**
```bash
cloudflared tunnel --url http://localhost:3001
```
会显示另一个地址，例如：
```
https://yyyy-yy-yy-yy-yy.trycloudflare.com
```
**这是后端地址，需要配置到前端。**

### 第4步：配置后端地址

1. 用浏览器打开前端地址（终端1显示的地址）
2. 按 `F12` 打开开发者工具
3. 在 Console（控制台）中输入：
   ```javascript
   localStorage.setItem('backend_url', '终端2显示的地址');
   location.reload();
   ```
4. 页面刷新后，就可以正常使用了！

### 第5步：告诉同事

将**前端地址**（终端1的地址）和账号信息告诉同事：
- 访问地址：`https://xxxx-xx-xx-xx-xx.trycloudflare.com`
- 账号：`member1` / `member1123` （或其他分配的账号）

---

## ⚠️ 重要提示

1. **保持所有窗口运行**：
   - 窗口1：`npm run dev`（本地服务）
   - 窗口2：前端 cloudflared
   - 窗口3：后端 cloudflared

2. **地址会变化**：
   - 每次重启 cloudflared，地址都会变化
   - 需要重新告诉同事新地址

3. **免费使用**：
   - Cloudflare Tunnel 完全免费
   - 适合临时使用和测试

---

## 🎯 如果地址经常变化，怎么办？

### 选项1：使用 ngrok（更稳定，但需要注册）

1. 访问 https://ngrok.com/ 注册（免费）
2. 安装：`brew install ngrok`
3. 配置：`ngrok config add-authtoken 你的token`
4. 启动：`ngrok http 3000`（前端）和 `ngrok http 3001`（后端）

**优点**：有管理面板，可以看到访问日志

### 选项2：部署到云服务器（长期方案）

如果长期使用，建议部署到云服务器，这样：
- ✅ 地址固定不变
- ✅ 24小时在线
- ✅ 所有人都能访问
- ✅ 更稳定可靠

需要我帮你准备部署方案吗？

---

## 📝 总结

**推荐顺序**：
1. ⭐ **Cloudflare Tunnel** - 最快最简单，适合临时使用
2. **ngrok** - 需要注册，但更稳定，有管理功能
3. **云服务器部署** - 长期方案，最稳定

**现在就开始**：运行 `brew install cloudflared` 然后按照上面的步骤操作！



