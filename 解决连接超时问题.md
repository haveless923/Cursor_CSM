# 解决连接超时问题 (ERR_CONNECTION_TIMED_OUT)

## 🔍 问题分析

看到 `ERR_CONNECTION_TIMED_OUT` 错误，说明无法通过公网IP `223.104.68.195` 访问。可能的原因：

1. **路由器没有配置端口转发**（最常见）
2. **防火墙阻止了连接**
3. **运营商NAT**：你的IP可能是内网IP，不是真正的公网IP
4. **服务没有运行**

## ✅ 解决方案

### 方案一：使用内网穿透（最简单快速）⭐

既然公网IP访问有问题，建议使用内网穿透工具：

#### 使用 Cloudflare Tunnel（推荐）

```bash
# 1. 安装
brew install cloudflared

# 2. 启动前端穿透
cloudflared tunnel --url http://localhost:3000

# 会显示一个地址，例如：https://xxxx.trycloudflare.com
# 将这个地址告诉同事即可！
```

**优点**：
- ✅ 完全免费
- ✅ 无需配置路由器
- ✅ 自动HTTPS
- ✅ 5分钟搞定

### 方案二：配置路由器端口转发

如果你确定有公网IP且想直接访问：

#### 1. 检查是否是真正的公网IP

```bash
# 查看路由器WAN口IP
# 登录路由器管理界面查看

# 如果路由器WAN口IP和 223.104.68.195 一致，说明是公网IP
# 如果不一致，说明是运营商NAT，无法直接访问
```

#### 2. 配置端口转发

1. **登录路由器**（通常是 `192.168.1.1` 或 `172.20.10.1`）
2. **找到"端口转发"或"虚拟服务器"**
3. **添加规则**：
   ```
   规则1：
   外部端口：3000
   内部端口：3000
   内部IP：172.20.10.2（你的内网IP）
   协议：TCP
   
   规则2：
   外部端口：3001
   内部端口：3001
   内部IP：172.20.10.2
   协议：TCP
   ```
4. **保存并重启路由器**

#### 3. 配置macOS防火墙

```bash
# 系统设置 > 网络 > 防火墙 > 选项
# 允许 Node.js 接收传入连接
```

#### 4. 测试

```bash
# 确保服务运行
cd /Users/bonnie/CSM_Cursor
npm run dev

# 在另一台设备或手机上测试
# 访问：http://223.104.68.195:3000
```

### 方案三：检查运营商NAT

很多运营商使用NAT，你的 `223.104.68.195` 可能是共享IP，不是真正的公网IP。

**检查方法**：
1. 登录路由器管理界面
2. 查看WAN口IP地址
3. 如果WAN口IP和 `223.104.68.195` 不一致，说明是NAT

**解决方法**：
- 联系运营商申请公网IP（可能需要付费）
- 或使用内网穿透工具（推荐）

### 方案四：部署到云服务器（长期方案）

如果本地访问有问题，建议部署到云服务器：

1. **购买云服务器**（阿里云、腾讯云等）
2. **配置安全组**（开放3000、3001端口）
3. **部署代码**
4. **通过服务器公网IP访问**

## 🚀 快速解决（推荐）

**最快的方法 - 使用 Cloudflare Tunnel**：

```bash
# 1. 安装（只需一次）
brew install cloudflared

# 2. 确保本地服务运行
cd /Users/bonnie/CSM_Cursor
npm run dev

# 3. 新开终端，启动穿透
cloudflared tunnel --url http://localhost:3000

# 4. 复制显示的地址（例如：https://xxxx.trycloudflare.com）
# 5. 告诉同事访问这个地址
```

**就这么简单！** 无需配置路由器，无需公网IP。

## 📝 当前状态检查

让我帮你检查当前服务状态...




